<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>나의 학습 동기 테스트 | SDT 5선지 + AI 코칭형</title>
<style>
  body { font-family: "Noto Sans KR", sans-serif; background:#f7f8fa; text-align:center; padding:30px; }
  h2 { color:#2c3e50; }
  .question { margin:25px auto; background:white; padding:20px; border-radius:14px; width:85%; max-width:700px; box-shadow:0 3px 10px rgba(0,0,0,0.1); }
  .option { display:block; margin:8px auto; padding:10px; width:80%; border-radius:8px; border:1px solid #ccc; background:#fff; cursor:pointer; }
  .option:hover { background:#eaf2ff; border-color:#007bff; }
  .selected { background:#007bff; color:white; border-color:#007bff; }
  button { margin-top:25px; padding:12px 30px; background:#007bff; color:white; border:none; border-radius:8px; cursor:pointer; font-size:16px; }
  button:hover { background:#0056b3; }
  #result { margin-top:35px; font-size:18px; font-weight:bold; color:#333; line-height:1.7; }

  /* 그래프 */
  .graph-container { margin: 30px auto; width: 85%; max-width: 700px; display: flex; justify-content: space-between; }
  .bar { flex: 1; margin: 0 5px; height: 45px; border-radius: 8px; line-height: 45px; color: white; font-weight: bold; font-size: 13px; }
  .inactive { background: #cfcfcf; }
  .active { background: #007bff; }

  /* AI 코칭 영역 */
  .ai-section {
    margin: 40px auto;
    background: #fff;
    border-radius: 12px;
    padding: 25px;
    width: 85%;
    max-width: 700px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.08);
    text-align: center;
  }
  .ai-section h4 { color: #2c3e50; margin-bottom: 15px; font-size: 20px; }
  .prompt-box {
    background: #f0f3f8;
    padding: 15px;
    border-radius: 8px;
    font-size: 16px;
    margin-bottom: 20px;
    display: inline-block;
    text-align: center;
    word-break: keep-all;
  }
  .copy-btn {
    background: #007bff; color: white;
    border: none; border-radius: 6px;
    padding: 10px 18px; cursor: pointer;
    font-size: 15px;
  }
  .copy-btn:hover { background: #0056b3; }

  .ai-links {
    margin-top: 15px;
  }
  .ai-links a {
    display: inline-block;
    margin: 6px;
    padding: 10px 16px;
    border-radius: 6px;
    text-decoration: none;
    color: white;
    font-weight: bold;
  }
  .chatgpt { background: #10a37f; }
  .gemini { background: #4285f4; }
  .chatgpt:hover { background: #0e8f6f; }
  .gemini:hover { background: #2e6ae0; }
</style>
</head>
<body>

<h2>🎓 나의 학습 동기 테스트 (SDT 5선지 완전형 + AI 코칭)</h2>
<p>각 문항에 가장 가까운 답변을 선택하세요. (총 6문항)</p>

<div id="quiz"></div>
<button onclick="showResult()">결과 보기</button>
<div id="result"></div>

<script>
const questions = [
  { text: "1️⃣ 나는 왜 공부를 하는가?",
    options: [
      { text: "솔직히 이유를 잘 모르겠다.", type: "무조절" },
      { text: "하지 않으면 혼날까봐 한다.", type: "외적 조절" },
      { text: "하지 않으면 죄책감이 들어서 한다.", type: "주입된 조절" },
      { text: "미래 목표를 이루기 위해 한다.", type: "동일시된 조절" },
      { text: "공부 그 자체가 즐겁다.", type: "내적 조절" }
    ]},
  { text: "2️⃣ 공부가 잘 안 될 때 나는...",
    options: [
      { text: "그냥 포기하고 싶다.", type: "무조절" },
      { text: "성적이 떨어질까봐 억지로 한다.", type: "외적 조절" },
      { text: "하지 않으면 스스로 실망할 것 같아 한다.", type: "주입된 조절" },
      { text: "목표를 이루기 위해 다시 마음을 다잡는다.", type: "동일시된 조절" },
      { text: "공부 과정 자체를 배우는 기회로 생각한다.", type: "내적 조절" }
    ]},
  { text: "3️⃣ 공부할 때 나의 주된 생각은?",
    options: [
      { text: "이게 무슨 의미가 있는지 모르겠다.", type: "무조절" },
      { text: "칭찬이나 점수를 받기 위해서 한다.", type: "외적 조절" },
      { text: "게으른 사람처럼 보이기 싫다.", type: "주입된 조절" },
      { text: "공부가 내 인생 목표와 연결되어 있다.", type: "동일시된 조절" },
      { text: "공부를 통해 스스로 성장하는 게 즐겁다.", type: "내적 조절" }
    ]},
  { text: "4️⃣ 공부를 할 때 가장 중요하게 생각하는 것은?",
    options: [
      { text: "잘 모르겠다. 그냥 해야 할 것 같아서 한다.", type: "무조절" },
      { text: "성적, 보상 같은 외적인 결과이다.", type: "외적 조절" },
      { text: "내가 게으르지 않다는 걸 증명하고 싶다.", type: "주입된 조절" },
      { text: "꿈을 이루기 위해 필요한 과정이다.", type: "동일시된 조절" },
      { text: "지식을 배우는 과정이 재미있다.", type: "내적 조절" }
    ]},
  { text: "5️⃣ 공부는 나에게 어떤 의미인가요?",
    options: [
      { text: "솔직히 별 의미 없다.", type: "무조절" },
      { text: "의무감이나 평가 때문이다.", type: "외적 조절" },
      { text: "하지 않으면 불안하다.", type: "주입된 조절" },
      { text: "미래를 위해 필요한 과정이다.", type: "동일시된 조절" },
      { text: "내 가치관과 완전히 일치한다.", type: "통합된 조절" }
    ]},
  { text: "6️⃣ 공부를 계속하게 만드는 이유는?",
    options: [
      { text: "딱히 이유가 없다.", type: "무조절" },
      { text: "보상이나 다른 사람의 인정 때문이다.", type: "외적 조절" },
      { text: "하지 않으면 죄책감이 든다.", type: "주입된 조절" },
      { text: "공부는 내 목표를 이루는 수단이다.", type: "동일시된 조절" },
      { text: "공부 자체가 나의 일부가 되었다.", type: "통합된 조절" }
    ]}
];

const quizDiv = document.getElementById('quiz');
const answers = {};

questions.forEach((q, qi) => {
  const qDiv = document.createElement('div');
  qDiv.className = 'question';
  qDiv.innerHTML = `<h4>${q.text}</h4>`;
  q.options.forEach((opt, oi) => {
    const btn = document.createElement('div');
    btn.className = 'option';
    btn.textContent = opt.text;
    btn.onclick = () => {
      document.querySelectorAll(`.q${qi}`).forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      answers[qi] = opt.type;
    };
    btn.classList.add(`q${qi}`);
    qDiv.appendChild(btn);
  });
  quizDiv.appendChild(qDiv);
});

function showResult(){
  if (Object.keys(answers).length < questions.length) {
    alert("모든 문항에 답해주세요!");
    return;
  }

  const counts = {};
  const weights = { "무조절": 1, "외적 조절": 2, "주입된 조절": 3, "동일시된 조절": 4, "통합된 조절": 5, "내적 조절": 6 };
  Object.values(answers).forEach(type => counts[type] = (counts[type] || 0) + 1);

  let totalScore = 0, totalCount = 0;
  for (const type in counts) {
    totalScore += counts[type] * weights[type];
    totalCount += counts[type];
  }
  const avgScore = totalScore / totalCount;

  let resultType = "";
  if (avgScore < 1.5) resultType = "무조절";
  else if (avgScore < 2.5) resultType = "외적 조절";
  else if (avgScore < 3.5) resultType = "주입된 조절";
  else if (avgScore < 4.5) resultType = "동일시된 조절";
  else if (avgScore < 5.5) resultType = "통합된 조절";
  else resultType = "내적 조절";

  const motivationCategory = {
    "무조절": "무동기",
    "외적 조절": "통제된 외적 동기",
    "주입된 조절": "통제된 외적 동기",
    "동일시된 조절": "자율적 외적 동기",
    "통합된 조절": "자율적 외적 동기",
    "내적 조절": "내적 동기"
  };

  const comments = {
    "무조절": "💡 아직 학습의 의미를 명확히 찾지 못한 상태입니다. 스스로의 목표를 정의해보세요.",
    "외적 조절": "💡 외부 요인(보상, 평가)이 주요 동기입니다. 자기 기준을 세워보세요.",
    "주입된 조절": "💡 불안이나 죄책감으로 학습하는 경향이 있습니다. 자신이 원하는 방향을 찾아보세요.",
    "동일시된 조절": "💡 목표와 학습이 연결되어 있습니다. 자율성이 성장 중이에요.",
    "통합된 조절": "💡 공부가 자신의 가치관과 통합되어 있습니다. 자기결정성이 높습니다.",
    "내적 조절": "💡 학습 자체를 즐기는 단계입니다. 지속적인 성취와 탐구가 원동력입니다."
  };

  const stages = ["무동기", "통제된 외적 동기", "자율적 외적 동기", "내적 동기"];
  const currentStage = motivationCategory[resultType];
  const graphHTML = `
    <div class="graph-container">
      ${stages.map(stage => `
        <div class="bar ${stage === currentStage ? 'active' : 'inactive'}">${stage}</div>
      `).join('')}
    </div>
  `;

  const prompt = `나는 '${motivationCategory[resultType]}' (${resultType}) 유형이야. 너는 나의 AI 학습코치야. 이런 유형의 학습자는 어떻게 하면 더 깊이 있고 지속적으로 학습을 확장할 수 있을까? 구체적인 전략을 알려줘.`;

  document.getElementById('result').innerHTML = `
    <h3>🎯 주요 동기: ${motivationCategory[resultType]}</h3>
    <h4>💬 조절 유형: ${resultType}</h4>
    <p>${comments[resultType]}</p>
    <h4>📊 자기결정성 연속선</h4>
    ${graphHTML}

    <div class="ai-section">
      <h4>🤖 AI와 함께 자기이해 확장하기</h4>
      <div id="promptText" class="prompt-box">${prompt}</div>
      <button class="copy-btn" onclick="copyPrompt()">📋 프롬프트 복사하기</button>
      <div class="ai-links">
        <a href="https://chat.openai.com/" target="_blank" class="chatgpt">ChatGPT로 가기</a>
        <a href="https://gemini.google.com/app" target="_blank" class="gemini">Gemini로 가기</a>
      </div>
    </div>
  `;
}

// ✅ 복사 기능
function copyPrompt() {
  const text = document.getElementById('promptText').textContent;
  navigator.clipboard.writeText(text).then(() => {
    alert("✅ 프롬프트가 복사되었습니다! AI 창에 붙여넣어보세요.");
  }).catch(err => {
    console.error("Clipboard copy failed:", err);
    alert("❌ 복사에 실패했습니다. 직접 드래그해서 복사해주세요.");
  });
}
</script>

</body>
</html>

